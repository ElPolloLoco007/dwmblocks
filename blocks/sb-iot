#!/bin/bash

case $BUTTON in
1)
	con="Connected \n"
	dis="Disconnected\n"

	while IFS="" read -r p;
	do
		ip="$(echo "$p" | awk '{print $1;}')"
		name="$(echo "$p" | awk '{print $2;}')"

		if ping -c1 -W1 $ip &>/dev/null; then
			temp=$(ssh pi@$ip '(vcgencmd measure_temp)')
			temp="${temp:5}"
			temp=${temp::-4}
			con+="󰌘 $name: "$temp"C\n"
		else
			dis+="󰌙 $name: no connection\n"
		fi

	done < /home/helgi/.config/ip_addresses
	dunstify "Internet of things" "$con$dis" -u normal
esac
